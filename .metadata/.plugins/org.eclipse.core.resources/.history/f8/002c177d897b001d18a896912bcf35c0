package com.deloitte.service;

import java.util.Iterator;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;

import com.deloitte.entity.Orders;
import com.deloitte.model.Food;
import com.deloitte.repo.IOrdersRepo;

/*
	create a method in realTime to create order calculate AmountDue and prepTime and Date Placed ON
	
*/
public class OrdersServiceImpl implements IOrdersService {
	@Autowired
	private IOrdersRepo ordersRepo;

	@Override
	public List<Orders> fetchAllOrders() {
		return ordersRepo.findAll();
	}

	@Override
	public Integer fetchPrepTime(Integer orderID) {
		List<Integer> orderedItems = ordersRepo.findById(orderID).get().getOrdersList();
		Iterator<Iterator> iterator = orderedItems.iterator();
		Integer ordersPrepTime = 0;

		while (iterator.hasNext()) {
			ordersPrepTime += iterator.next().getFoodPrepTime();
		}

		return ordersPrepTime;
	}

	@Override
	public Boolean orderIsPaid(Integer orderID) {
		return ordersRepo.findById(orderID).get().getOrdersIsPaid();
	}

	@Override
	public Double orderAmount(Integer orderID) {
		return ordersRepo.findById(orderID).get().getOrdersAmountDue();
	}

	@Override
	public Orders fetchOrderByID(Integer orderID) {
		return ordersRepo.findById(orderID).get();
	}

}
